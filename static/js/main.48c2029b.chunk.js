(this["webpackJsonpgoit-react-hw-04-hooks-images"]=this["webpackJsonpgoit-react-hw-04-hooks-images"]||[]).push([[0],{12:function(e,t,n){e.exports={backdrop:"Modal_backdrop__1NWgg",content:"Modal_content__2pjCt",closeIcon:"Modal_closeIcon__1lM6N"}},16:function(e,t,n){e.exports={item:"ImageGalleryItem_item__3dAih",image:"ImageGalleryItem_image__2UNtU"}},19:function(e,t,n){e.exports={container:"Container_container__15pUq"}},21:function(e,t,n){e.exports={btn:"Button_btn__2qnUE"}},24:function(e,t,n){e.exports={image:"ImageGalleryView_image__wn38e"}},26:function(e,t,n){e.exports={gallery:"ImageGallery_gallery__2CC7j"}},32:function(e,t,n){},42:function(e,t,n){"use strict";n.r(t);var a=n(2),r=n(1),c=n.n(r),o=n(4),i=n.n(o),s=(n(32),n(3)),u=n(5),l=(n(33),n(19)),b=n.n(l);function j(e){var t=e.children;return Object(a.jsx)("div",{className:b.a.container,children:t})}var d=n(20),f=n(0);var h={useStateWithLabel:function(e,t){var n=Object(r.useState)(e),a=Object(s.a)(n,2),c=a[0],o=a[1];return Object(r.useDebugValue)("".concat(t,": ").concat(c)),[c,o]},usePrevious:function(e){var t=Object(r.useRef)();return Object(r.useEffect)((function(){t.current=e})),t.current}},g=n(7),m=n.n(g),p=h.useStateWithLabel;var v=function(e){var t=e.getSearchQuery,n=p("","value"),c=Object(s.a)(n,2),o=c[0],i=c[1],l=Object(r.useRef)(null);return Object(a.jsx)("header",{className:m.a.searchbar,children:Object(a.jsxs)("form",{className:m.a.form,onSubmit:function(e){e.preventDefault();var n=o.toLowerCase().trim();if(""===n)return u.b.error("Please enter a query"),void l.current.blur();t(n),i(""),l.current.blur()},children:[Object(a.jsx)("button",{type:"submit",className:m.a.btn,ref:l,children:Object(a.jsx)(f.b.Provider,{value:{size:"16px"},children:Object(a.jsx)(d.a,{})})}),Object(a.jsx)("input",{className:m.a.input,type:"text",value:o,placeholder:"Search images and photos",onChange:function(e){return i(e.target.value)}})]})})},O=n(21),x=n.n(O);var _=function(e){var t=e.updateSearchPage;return Object(a.jsx)("button",{className:x.a.btn,onClick:t,children:"Load more"})},y=n(22),I=n(17),w=n(14),S=n(23),P=n.n(S),N=n(11),k=n.n(N),C=n(24),L=n.n(C),M=n(8),E=n.n(M),U=n(15),q="18962627-3cde470dd8252503102b1f7f8",B="https://pixabay.com/api/";function Q(){return(Q=Object(U.a)(E.a.mark((function e(t){var n,a,r=arguments;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:1,a="".concat(B,"?image_type=photo&orientation=horizontal&q=").concat(t,"&page=").concat(n,"&per_page=12&key=").concat(q),e.abrupt("return",R(a).then((function(e){return e})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function R(e){return W.apply(this,arguments)}function W(){return(W=Object(U.a)(E.a.mark((function e(t){var n,a;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:return n=e.sent,e.next=5,n.json();case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var z={fetchImages:function(e){return Q.apply(this,arguments)}},F=n.p+"static/media/initialScreenPlaceholder.7edde63a.jpg",G=n.p+"static/media/errorPlaceholder.c80120ff.jpg",A=n(25),D=n(12),H=n.n(D),T=document.querySelector("#modal-root");var J=function(e){var t=e.toggleModal,n=e.children;return Object(r.useEffect)((function(){var e=function(e){"Escape"===e.code&&t()};return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}})),Object(o.createPortal)(Object(a.jsx)("div",{className:H.a.backdrop,onClick:function(e){e.target===e.currentTarget&&t()},children:Object(a.jsxs)("div",{className:H.a.content,children:[Object(a.jsx)("button",{className:H.a.closeIcon,onClick:function(){return t()},children:Object(a.jsx)(f.b.Provider,{value:{size:"36px"},children:Object(a.jsx)(A.a,{})})}),n]})}),T)},V=n(26),K=n.n(V),X=n(16),Y=n.n(X);var Z=function(e){var t=e.image,n=e.showBigImageInModal;return Object(a.jsx)("li",{className:Y.a.item,children:Object(a.jsx)(k.a,{src:t.webformatURL,placeholder:t.previewURL,children:function(e,r){return Object(a.jsx)("img",{style:{opacity:r?.5:1},src:e,alt:t.tags,"data-image":t.largeImageURL,className:Y.a.image,onClick:n})}})})};var $=function(e){var t=e.images,n=e.showBigImageInModal;return Object(a.jsx)("ul",{className:K.a.gallery,children:t&&t.map((function(e){return Object(a.jsx)(Z,{image:e,showBigImageInModal:n},e.id)}))})};function ee(){var e=Object(y.a)(["\n          margin-top: 80px;\n        "]);return ee=function(){return e},e}var te="idle",ne="pending",ae="resolved",re="rejected",ce=h.useStateWithLabel,oe=h.usePrevious;var ie=function(e){var t=e.searchQuery,n=e.page,c=e.resetSearchPage,o=e.updateImageAvialability,i=ce(null,"images"),l=Object(s.a)(i,2),b=l[0],j=l[1],d=ce(null,"totalSearchResults"),f=Object(s.a)(d,2),h=f[0],g=f[1],m=ce(te,"status"),p=Object(s.a)(m,2),v=p[0],O=p[1],x=ce(!1,"modalIsOpen"),_=Object(s.a)(x,2),y=_[0],S=_[1],N=ce("","imageInModal"),C=Object(s.a)(N,2),M=C[0],E=C[1],U=ce("","activeImage"),q=Object(s.a)(U,2),B=q[0],Q=q[1],R=oe(t);Object(r.useEffect)((function(){R!==t&&""!==t&&(c(),O(ne),z.fetchImages(t).then((function(e){return console.log(e),0===e.totalHits?(u.b.error("No images for ".concat(t,". Please try another query.")),void O(re)):0===e.hits.length?(u.b.error("Oops! Pixabay failed us and forgot to send images. Please refresh page & try again."),void O(re)):(j(e.hits),g(e.totalHits),void O(ae))})).catch((function(e){O(re)})))}),[R,c,t,j,O,g,o]),Object(r.useEffect)((function(){if(b&&v===ae){var e=h>b.length;o(e)}else o(!1)}),[b,v,h,o]);var W=oe(n);Object(r.useEffect)((function(){W<n&&z.fetchImages(t,n).then((function(e){j((function(t){return[].concat(Object(I.a)(t),Object(I.a)(e.hits))}))})).catch((function(e){O(re)})).finally((function(e){window.scrollTo({top:document.documentElement.scrollHeight-1300,behavior:"smooth"})}))}),[n,W,t,j,O,o]);var A=function(){S((function(e){return!e})),E(""),Q("")};return v===te?Object(a.jsx)("div",{children:Object(a.jsx)("img",{src:F,alt:"please enter a query"})}):v===ne?Object(a.jsx)(P.a,{css:Object(w.css)(ee()),size:250,color:"orange",loading:!0}):v===re?Object(a.jsx)("div",{children:Object(a.jsx)("img",{src:G,alt:"error"})}):v===ae?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)($,{images:b,showBigImageInModal:function(e){A(),E((function(t){return t?"":e.target.dataset.image})),Q((function(t){return t?"":e.target.src}))}}),y&&Object(a.jsx)(J,{toggleModal:A,children:Object(a.jsx)(k.a,{src:M,placeholder:B,children:function(e,t){return Object(a.jsx)("img",{style:{opacity:t?.5:1},src:e,alt:"",className:L.a.image})}})})]}):void 0},se=h.useStateWithLabel;var ue=function(){var e=se("","searchQuery"),t=Object(s.a)(e,2),n=t[0],r=t[1],c=se(1,"searchPage"),o=Object(s.a)(c,2),i=o[0],l=o[1],b=se(!1,"moreImagesAvailable"),d=Object(s.a)(b,2),f=d[0],h=d[1];return Object(a.jsxs)(j,{children:[Object(a.jsx)(v,{getSearchQuery:function(e){return r(e)}}),Object(a.jsx)(ie,{searchQuery:n,page:i,resetSearchPage:function(){return l(1)},updateImageAvialability:function(e){return h(e)}}),f&&Object(a.jsx)(_,{updateSearchPage:function(){return l((function(e){return e+1}))}}),Object(a.jsx)(u.a,{autoClose:3e3})]})},le=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,45)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,o=t.getTTFB;n(e),a(e),r(e),c(e),o(e)}))};i.a.render(Object(a.jsx)(c.a.StrictMode,{children:Object(a.jsx)(ue,{})}),document.getElementById("root")),le()},7:function(e,t,n){e.exports={searchbar:"Searchbar_searchbar__3UcKv",form:"Searchbar_form__3P57z",input:"Searchbar_input__30WGQ",btn:"Searchbar_btn__16HhD","react-icons":"Searchbar_react-icons__26vP0"}}},[[42,1,2]]]);
//# sourceMappingURL=main.48c2029b.chunk.js.map