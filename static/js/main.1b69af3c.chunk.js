(this["webpackJsonpgoit-react-hw-04-hooks-images"]=this["webpackJsonpgoit-react-hw-04-hooks-images"]||[]).push([[0],{12:function(e,t,n){e.exports={backdrop:"Modal_backdrop__1NWgg",content:"Modal_content__2pjCt",closeIcon:"Modal_closeIcon__1lM6N"}},16:function(e,t,n){e.exports={item:"ImageGalleryItem_item__3dAih",image:"ImageGalleryItem_image__2UNtU"}},19:function(e,t,n){e.exports={container:"Container_container__15pUq"}},21:function(e,t,n){e.exports={btn:"Button_btn__2qnUE"}},24:function(e,t,n){e.exports={image:"ImageGalleryView_image__wn38e"}},26:function(e,t,n){e.exports={gallery:"ImageGallery_gallery__2CC7j"}},32:function(e,t,n){},42:function(e,t,n){"use strict";n.r(t);var a=n(2),r=n(1),c=n.n(r),o=n(4),i=n.n(o),s=(n(32),n(3)),u=n(5),l=(n(33),n(19)),b=n.n(l);function j(e){var t=e.children;return Object(a.jsx)("div",{className:b.a.container,children:t})}var d=n(20),f=n(0);function g(e,t){var n=Object(r.useState)(e),a=Object(s.a)(n,2),c=a[0],o=a[1];return Object(r.useDebugValue)("".concat(t,": ").concat(c)),[c,o]}var h=n(7),m=n.n(h);var p=function(e){var t=e.getSearchQuery,n=g("","value"),c=Object(s.a)(n,2),o=c[0],i=c[1],l=Object(r.useRef)(null);return Object(a.jsx)("header",{className:m.a.searchbar,children:Object(a.jsxs)("form",{className:m.a.form,onSubmit:function(e){e.preventDefault();var n=o.toLowerCase().trim();if(""===n)return u.b.error("Please enter a query"),void l.current.blur();t(n),i(""),l.current.blur()},children:[Object(a.jsx)("button",{type:"submit",className:m.a.btn,ref:l,children:Object(a.jsx)(f.b.Provider,{value:{size:"16px"},children:Object(a.jsx)(d.a,{})})}),Object(a.jsx)("input",{className:m.a.input,type:"text",value:o,placeholder:"Search images and photos",onChange:function(e){return i(e.target.value)}})]})})},v=n(21),O=n.n(v);var x=function(e){var t=e.updateSearchPage;return Object(a.jsx)("button",{className:O.a.btn,onClick:t,children:"Load more"})},_=n(22),y=n(17),I=n(14),w=n(23),S=n.n(w),P=n(11),N=n.n(P),k=n(24),C=n.n(k),M=n(8),E=n.n(M),L=n(15),U="18962627-3cde470dd8252503102b1f7f8",q="https://pixabay.com/api/";function B(){return(B=Object(L.a)(E.a.mark((function e(t){var n,a,r=arguments;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:1,a="".concat(q,"?image_type=photo&orientation=horizontal&q=").concat(t,"&page=").concat(n,"&per_page=12&key=").concat(U),e.abrupt("return",Q(a).then((function(e){return e})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Q(e){return R.apply(this,arguments)}function R(){return(R=Object(L.a)(E.a.mark((function e(t){var n,a;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:return n=e.sent,e.next=5,n.json();case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var z={fetchImages:function(e){return B.apply(this,arguments)}},F=n.p+"static/media/initialScreenPlaceholder.7edde63a.jpg",G=n.p+"static/media/errorPlaceholder.c80120ff.jpg",A=n(25),D=n(12),H=n.n(D),T=document.querySelector("#modal-root");var J=function(e){var t=e.toggleModal,n=e.children;return Object(r.useEffect)((function(){var e=function(e){"Escape"===e.code&&t()};return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}})),Object(o.createPortal)(Object(a.jsx)("div",{className:H.a.backdrop,onClick:function(e){e.target===e.currentTarget&&t()},children:Object(a.jsxs)("div",{className:H.a.content,children:[Object(a.jsx)("button",{className:H.a.closeIcon,onClick:function(){return t()},children:Object(a.jsx)(f.b.Provider,{value:{size:"36px"},children:Object(a.jsx)(A.a,{})})}),n]})}),T)},V=n(26),W=n.n(V),K=n(16),X=n.n(K);var Y=function(e){var t=e.image,n=e.showBigImageInModal;return Object(a.jsx)("li",{className:X.a.item,children:Object(a.jsx)(N.a,{src:t.webformatURL,placeholder:t.previewURL,children:function(e,r){return Object(a.jsx)("img",{style:{opacity:r?.5:1},src:e,alt:t.tags,"data-image":t.largeImageURL,className:X.a.image,onClick:n})}})})};var Z=function(e){var t=e.images,n=e.showBigImageInModal;return Object(a.jsx)("ul",{className:W.a.gallery,children:t&&t.map((function(e){return Object(a.jsx)(Y,{image:e,showBigImageInModal:n},e.id)}))})};function $(){var e=Object(_.a)(["\n          margin-top: 80px;\n        "]);return $=function(){return e},e}var ee="idle",te="pending",ne="resolved",ae="rejected";function re(e){var t=Object(r.useRef)();return Object(r.useEffect)((function(){t.current=e})),t.current}var ce=function(e){var t=e.searchQuery,n=e.page,c=e.resetSearchPage,o=e.updateImageAvialability,i=g(null,"images"),l=Object(s.a)(i,2),b=l[0],j=l[1],d=g(null,"totalSearchResults"),f=Object(s.a)(d,2),h=f[0],m=f[1],p=g(ee,"status"),v=Object(s.a)(p,2),O=v[0],x=v[1],_=g(!1,"modalIsOpen"),w=Object(s.a)(_,2),P=w[0],k=w[1],M=g("","imageInModal"),E=Object(s.a)(M,2),L=E[0],U=E[1],q=g("","activeImage"),B=Object(s.a)(q,2),Q=B[0],R=B[1],A=re(t);Object(r.useEffect)((function(){A!==t&&""!==t&&(c(),x(te),z.fetchImages(t).then((function(e){return console.log(e),0===e.totalHits?(u.b.error("No images for ".concat(t,". Please try another query.")),void x(ae)):0===e.hits.length?(u.b.error("Oops! Pixabay failed us and forgot to send images. Please refresh page & try again."),void x(ae)):(j(e.hits),m(e.totalHits),void x(ne))})).catch((function(e){x(ae)})))}),[A,c,t,j,x,m,o]),Object(r.useEffect)((function(){if(b&&O===ne){var e=h>b.length;o(e)}else o(!1)}),[b,O,h,o]);var D=re(n);Object(r.useEffect)((function(){D<n&&z.fetchImages(t,n).then((function(e){j((function(t){return[].concat(Object(y.a)(t),Object(y.a)(e.hits))}))})).catch((function(e){x(ae)})).finally((function(e){window.scrollTo({top:document.documentElement.scrollHeight-1300,behavior:"smooth"})}))}),[n,D,t,j,x,o]);var H=function(){k((function(e){return!e})),U(""),R("")};return O===ee?Object(a.jsx)("div",{children:Object(a.jsx)("img",{src:F,alt:"please enter a query"})}):O===te?Object(a.jsx)(S.a,{css:Object(I.css)($()),size:250,color:"orange",loading:!0}):O===ae?Object(a.jsx)("div",{children:Object(a.jsx)("img",{src:G,alt:"error"})}):O===ne?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(Z,{images:b,showBigImageInModal:function(e){H(),U((function(t){return t?"":e.target.dataset.image})),R((function(t){return t?"":e.target.src}))}}),P&&Object(a.jsx)(J,{toggleModal:H,children:Object(a.jsx)(N.a,{src:L,placeholder:Q,children:function(e,t){return Object(a.jsx)("img",{style:{opacity:t?.5:1},src:e,alt:"",className:C.a.image})}})})]}):void 0};var oe=function(){var e=g("","searchQuery"),t=Object(s.a)(e,2),n=t[0],r=t[1],c=g(1,"searchPage"),o=Object(s.a)(c,2),i=o[0],l=o[1],b=g(!1,"moreImagesAvailable"),d=Object(s.a)(b,2),f=d[0],h=d[1];return Object(a.jsxs)(j,{children:[Object(a.jsx)(p,{getSearchQuery:function(e){return r(e)}}),Object(a.jsx)(ce,{searchQuery:n,page:i,resetSearchPage:function(){return l(1)},updateImageAvialability:function(e){return h(e)}}),f&&Object(a.jsx)(x,{updateSearchPage:function(){return l((function(e){return e+1}))}}),Object(a.jsx)(u.a,{autoClose:3e3})]})},ie=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,45)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,o=t.getTTFB;n(e),a(e),r(e),c(e),o(e)}))};i.a.render(Object(a.jsx)(c.a.StrictMode,{children:Object(a.jsx)(oe,{})}),document.getElementById("root")),ie()},7:function(e,t,n){e.exports={searchbar:"Searchbar_searchbar__3UcKv",form:"Searchbar_form__3P57z",input:"Searchbar_input__30WGQ",btn:"Searchbar_btn__16HhD","react-icons":"Searchbar_react-icons__26vP0"}}},[[42,1,2]]]);
//# sourceMappingURL=main.1b69af3c.chunk.js.map